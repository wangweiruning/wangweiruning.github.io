<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="user-scalable=yes, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<title>平面图标点</title>	
	<style>
        html,body{
            font-size: 1rem;
            margin:0;
            padding:0;
        }
        .viewerimg {
            width: 40rem;
            height: auto;
        }
    </style>
</head>
<body>
    <div style="position: relative;height:auto;width:40rem" id="containter">
          
    </div>
        
  <script>
    // gopath('https://wangweiruning.github.io/201904221702294488.svg');
function gopath(path){
    
    var containter = document.getElementById("containter");

    let oftop=0;
    let ofleft=0;
     let images =  `'<img id="imgView" class="viewerimg" draggable="true" src="${path}" alt="平面施工图" title="智慧工地平面施工地图" />'`;
        images  +=    '<div id="alistd" style="width: 0.2rem;height: 0.2rem;position: absolute;border-radius: 50%"></div>';
        containter.innerHTML = images;
    var target = document.getElementById("imgView");
    var divss = document.getElementById("alistd");
    var psdWidth = 750;
    window.onresize = function(e) {
        var w = window.innerWidth || document.documentElement.clientWidth || document.body.offsetWidth;
        var fontSize = w * 100 / psdWidth;
        document.documentElement.style.fontSize = fontSize + 'px';
    
    };
    window.onresize();


document.addEventListener('click',function(e){
        var w = window.innerWidth || document.documentElement.clientWidth || document.body.offsetWidth;
        var fontSize = w * 100 / psdWidth;
            oftop=(e.layerY-10);
            ofleft= (e.layerX-10);
            
            divss.style.backgroundColor='#000';
            divss.style.top  =  oftop/fontSize+ 'rem';
            divss.style.left =  ofleft/fontSize+ 'rem';
        
            //获取图片原始大小:NaturalWidth and NaturalHeight
            let targetWidth  = target.naturalWidth;
            let targetHeight = target.naturalHeight;
 
            //offsetWidth  offsetHeight
            let imgWidth = target.offsetWidth;
            let imgHeight = target.offsetHeight;

            //获取到相对的比例宽和高
            getMatchofWidth = (ofleft/imgWidth)*targetWidth;
            getMatchHeight  = (oftop/imgHeight)*targetHeight;
      
         console.log(getMatchofWidth,getMatchHeight)
         let result = {getMatchofWidth,getMatchHeight};
         console.log(result)
         window.postMessage(JSON.stringify(result))
    })

}
</script> 
    
    
</body>


</html>